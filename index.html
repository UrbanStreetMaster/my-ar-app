<!DOCTYPE html>
<html>
<head>
    <title>Professional AR Tool</title>
    <script src="aframe.io"></script>
    <script src="raw.githack.com"></script>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; } /* Black background prevents blank white screens */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #111; z-index: 999; display: flex; flex-direction: column;
            justify-content: center; align-items: center; color: white;
        }
        button { padding: 20px 40px; font-size: 22px; background: #2196F3; color: white; border: none; border-radius: 10px; }
        #ui-controls { position: fixed; bottom: 20px; width: 100%; text-align: center; z-index: 1000; display: none; }
    </style>
</head>
<body>
    <div id="overlay">
        <h2>Vehicle Turning Radius</h2>
        <button onclick="startAR()">START ENGINE</button>
    </div>

    <div id="ui-controls">
        <button onclick="location.reload()" style="background: #f44336; font-size: 14px;">RESET APP</button>
    </div>

    <!-- Added 'renderer' settings to force visibility on iOS -->
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" 
             renderer="antialias: true; alpha: false; logarithmicDepthBuffer: true;">
        
        
        <!-- Turning Radius (Visible after 2 taps) -->
        <a-ring id="turningCircle" color="#00ff00" radius-inner="3.9" radius-outer="4.1" 
                rotation="-90 0 0" position="0 0 0" visible="false"></a-ring>
        
        
    </a-scene>

    <script>
        function startAR() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('ui-controls').style.display = 'block';
            
            // Forces iOS 26 to activate motion sensors
            if (window.DeviceOrientationEvent && typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission();
            }
        }

        let points = [];
        const scene = document.querySelector('a-scene');
        scene.addEventListener('click', function (event) {
            const touchPoint = event.detail.intersection.point;
            points.push(touchPoint);
            if (points.length === 2) {
                const distance = Math.sqrt(Math.pow(points[1].x - points[0].x, 2) + Math.pow(points[1].z - points[0].z, 2));
                const circle = document.getElementById('turningCircle');
                circle.setAttribute('position', `${points[0].x} ${points[0].y} ${points[0].z}`);
                circle.setAttribute('radius-inner', distance - 0.05);
                circle.setAttribute('radius-outer', distance + 0.05);
                circle.setAttribute('visible', 'true');
                points = [];
            }
        });
    </script>
</body>
</html>
